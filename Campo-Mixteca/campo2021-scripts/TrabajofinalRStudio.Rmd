---
title: "Maiz_Campo_Mixteca_Unix_R"
date: "17/11/2021"
output: html_document
  
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
### *Universidad Nacional Aut√≥noma de M√©xico*
### **Instituto de Ecolog√≠a**
### **Doctorado en Ciencias Biom√©dicas**
### Alumno: *Enzo Agustin Ferrari Fructos*
### T√≠tulo Proyecto de Investigaci√≥n: *"Bases transcript√≥micas y fisiol√≥gicas de la plasticidad fenot√≠pica de ma√≠ces tolerantes a estr√©s h√≠drico: ma√≠ces de cajete en la Mixteca Alta de Oaxaca"*
## Trabajo de campo - Ciclo agr√≠cola 2021
### Localizaci√≥n: Municipio Santo Domingo Tonaltepec, Oaxaca, M√©xico
#### Variables clim√°ticas, morfol√≥gicas y fenol√≥gicas

##### Introducci√≥n

*Se llevaron a cabo 14 jornadas de trabajo de campo desde el 29 de abril al 10 de octubre del 2021 para la toma de mediciones fenol√≥gicas, morfol√≥gicas (04/07, 22/07, 27/07, 03/08, 04/08, 11/08, 12/08, 09/10 y 10/10) y fisiol√≥gicas (22/07, 25/07, 27/07, 03/08, 05/08, 06/08, 12/08, 10/10). Asimismo, se registr√≥ en simult√°neo las variables clim√°ticas en intervalos de 1h de par√°metros clim√°ticos atmosf√©ricos y del suelo (temperatura atmosf√©rica y del suelo, precipitaci√≥n, direcci√≥n/velocidad del viento, humedad atmosf√©rica y del suelo). Se realiz√≥ seguimiento fenol√≥gico a 5 parcelas de cajete (C1-C5) en lamabordo y 4 parcelas de temporal (T1-T4) en tapa-pi√© (d√≠a de siembra, d√≠a a emergencia, d√≠a a diferenciaci√≥n del √°pice, d√≠as a floraci√≥n femenina/masculina, d√≠as a madurez del grano). A su vez, las parcelas C1 (Ichiyodo) y T1 (La Loma) se subdividieron en 4 cuadrantes para dar seguimiento de las variables morfol√≥gicas (altura, cantidad de hojas/nudos, di√°metro inf/med/sup) de 20 plantas por cuadrante (80 por parcela, 160 en total). Estas mismas 160 plantas se utilizaron para las mediciones fisiol√≥gicas, por triplicado de cada variable por planta: fluorescencia m√≠nima (F0), fluorescencia m√°xima (FM) y fluorescencia variable (FV), rendimiento cu√°ntico del PSII o ùö´F/FM o Y(II), tasa de transporte de electrones (ETR), radiaci√≥n fotosint√©ticamente activa (PAR), temperatura de la hoja (T), humedad relativa (RH), FMS o FM‚Äô (fluoresc. m√°x. con iluminaci√≥n act√≠nica, edo. estacionario) y FMS o F (fluorescencia en condiciones de estadio estacionario ‚ÄúS‚Äù (previo al pulso de saturaci√≥n). En las variables de siembra, para las parcelas C1 (Ichiyodo) y T1 (La Loma) se contabiliz√≥ cu√°ntas plantas germinaron por mata.*

##### Pregunta/Hip√≥tesis/Objetivos

***Pregunta***  
¬øQu√© variable influye m√°s sobre el crecimiento y estr√©s fisiol√≥gico de los ma√≠ces de cajete y temporal, el agroecosistema o el acervo gen√©tico? 

***Hip√≥tesis***  
El agroecosistema influye m√°s sobre el crecimiento y el estr√©s fisiol√≥gico de las plantas.

***Objetivos***  
Indagar sobre la incidencia de diferentes variables (clim√°ticas, morfol√≥gicas y fisiol√≥gicas) de un experimento a campo en la Mixteca Alta de Oaxaca

##### M√©todo/Dise√±o/An√°lisis

*En este reporte se indicar√°n √∫nicamente los pasos realizados en RStudio. Los comandos de Unix se indicar√°n como anexos ***(A1-An)***, al archivo:*  
**/Campo-Mixteca/campo2021-scripts/TrabajofinalScriptsUnix.md**  
*con su correspondiente visualizaci√≥n de outputs*

##### M√©todo

##### A1. Creaci√≥n de estructura de directorios y archivos

***(Ver A1 en TrabajofinalScriptsUnix.md)***

Creamos *Campo-Mixteca.Rproj*, *TrabajoFinal.RData* y *TrabajoFinal.Rhistory*, y cargamos las librer√≠as:


```{r}
library(rmarkdown)
library(dplyr)
library(ggplot2)
library(BiocManager)
library(colorspace)
library(RColorBrewer)
setwd("C:/Users/elfer/Documents/Campo-Mixteca/")
list.files()
```
Primero trabajaremos con los datos clim√°ticos. El set de datos de la estaci√≥n meteorol√≥gica contaba con tres tablas en archivos .txt, con registros tomados de diferentes fechas, pero con filas repetidas entre archivos. Otro inconveniente era el formato de fechas dd/mm/aa (que dificulta el orden alfanum√©rico de los datos), as√≠ como la existencia de registros de prueba de diciembre de 2020,  Asimismo, las etiquetas ten√≠an nombres inoportunos y divididos en dos filas. Ej: de uno de los archivos:

```{r}
read.delim("C:/Users/elfer/Documents/respaldos_tablas_Campo-Mixteca/Mayo-Julio_2021_Lama.txt",header = TRUE) %>% head()
```


Por esta raz√≥n, previo a crear los objetos en RStudio y ser subidos a la carpeta **"C:/Users/elfer/Documents/Campo-Mixteca/campo2021-data/clima"**  modifiqu√© los archivos .txt de clima en (Excel), modifiqu√© las etiquetas para mejorar la notaci√≥n, elimin√© la segunda fila, para que s√≥lo la primera fila contenga las etiquetas. Y modifiqu√© el formato de fecha a aa/mm/dd. Ej con el archivo anterior modificado:

```{r}
read.delim("C:/Users/elfer/Documents/respaldos_tablas_Campo-Mixteca/2020_12_2021_07_Lama.txt", header = TRUE) %>% head()
```

Con los archivos modificados seg√∫n lo descrito (./2020_12_2021_07_Lama.txt ./2021_05_2021_06_Lama.txt  ./2021_07_2021_10_Lama.txt), se aplicar√°n comandos de Unix para crear un archivo unificado de la estaci√≥n meteorol√≥gica en el ciclo agr√≠cola 2021.

##### A2. Creaci√≥n de tabla de datos clim√°ticos crudos ordenados

La tabla fue subida a la carpeta **"C:/Users/elfer/Documents/Campo-Mixteca/campo2021-data/clima"**

```{r}
setwd("C:/Users/elfer/Documents/Campo-Mixteca/campo2021-data/clima/")
list.files()
Clima_Ichiyodo_2021 <- read.delim("C:/Users/elfer/Documents/Campo-Mixteca/campo2021-data/clima/clima-ordenado.txt",header=TRUE)
glimpse(Clima_Ichiyodo_2021)
```

Son demasiados datos clim√°ticos. Selecciono s√≥lo las columnas de mi inter√©s, modifico el tipo de valor a num√©rico en medidas de Humedad y Temperatura de suelo, filtro para quitar los registros de humedad con valor NA o mayor que 100 (primeras mediciones fueron de prueba), y creo un nuevo objeto, reducido de mis datos clim√°ticos.



```{r}
Clima_Ichiyodo_2021_reducido <- Clima_Ichiyodo_2021 %>% select(Date,Time,Temp_Out,Hi_Temp,Low_Temp,Out_Hum,Dew_Pt,Wind_Speed,Hi_Speed,Bar,Rain,Soil1_Moist,Soil2_Moist,Soil3_Moist,Soil4_Moist,Soil_Temp1,Soil_Temp2,Soil_Temp3,Soil_Temp4)
Clima_Ichiyodo_2021_reducido$Soil1_Moist <- as.double(Clima_Ichiyodo_2021$Soil1_Moist)
Clima_Ichiyodo_2021_reducido$Soil2_Moist <- as.double(Clima_Ichiyodo_2021$Soil2_Moist)
Clima_Ichiyodo_2021_reducido$Soil3_Moist <- as.double(Clima_Ichiyodo_2021$Soil3_Moist)
Clima_Ichiyodo_2021_reducido$Soil4_Moist <- as.double(Clima_Ichiyodo_2021$Soil4_Moist)
Clima_Ichiyodo_2021_reducido$Soil_Temp1 <- as.double(Clima_Ichiyodo_2021$Soil_Temp1)
Clima_Ichiyodo_2021_reducido$Soil_Temp2 <- as.double(Clima_Ichiyodo_2021$Soil_Temp2)
Clima_Ichiyodo_2021_reducido$Soil_Temp3 <- as.double(Clima_Ichiyodo_2021$Soil_Temp3)
Clima_Ichiyodo_2021_reducido$Soil_Temp4 <- as.double(Clima_Ichiyodo_2021$Soil_Temp4)
Clima_Ichiyodo_2021_reducido <- Clima_Ichiyodo_2021_reducido %>% filter(Soil1_Moist<=100,Soil2_Moist<=100,Soil3_Moist<=100,Soil4_Moist<=100)
glimpse(Clima_Ichiyodo_2021_reducido)
```

##### Resultados

En el directorio ***"C:/Users/elfer/Documents/Campo-Mixteca/campo2021-analysis/"*** se ubicar√°n los plots.

```{r}
setwd("C:/Users/elfer/Documents/Campo-Mixteca/campo2021-analysis/")
Rain_Date <- ggplot(Clima_Ichiyodo_2021_reducido, aes(Rain,Date)) + geom_col(fill="Blue")
Rain_Date
Rain_Time <- ggplot(Clima_Ichiyodo_2021_reducido, aes(Rain,Time)) + geom_col(fill="Blue")
Rain_Time
Rain_Temp_Out <- ggplot(Clima_Ichiyodo_2021_reducido, aes(Temp_Out,Rain)) + geom_point(color="Blue")
Rain_Temp_Out
```

##### Conclusi√≥n 

Estos son resultados preliminares de la miner√≠a de datos de clima, morfolog√≠a y fisiolog√≠a, que ser√°n presentados como resultados parciales para el examen tutoral semestral a realizarse el d√≠a 3 de diciembre de 2021.